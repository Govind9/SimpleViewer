<!DOCTYPE html>
<html>
<head>
<title>Simple Viewer provided by TheCubicle.US</title>

<style>

select {
	border: 0px;
    outline: 0px;
    font-size: 30px;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    }

.footer {
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    text-align: center;
}

#byte_content {
    margin: 5px 0;
    max-height: 100px;
    overflow-y: auto;
    overflow-x: hidden;
  }

h3 {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    text-align: center;
}

#customers {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    border-collapse: collapse;
    table-layout: auto;
    width: 96%;
    margin-left:2%; 
    margin-right:2%;
}

#customers td, #customers th {
    border: 3px solid #000000;
    padding: 20px;
    
}



#customers tr:hover {background-color: #ddd;}


</style>
</head>
<body>

</br>

<input type='file' id='fileinput'>
<input type='button' id='btnLoad' value='Load' onclick='loadFile();'>



</br>
</br>
</br>
<h3> 
<select name="Events/Groups" id="chooseEvent" onchange="loadSheet();">
<option>Load competition .json file to start!</option>
</select> 
</h3>
</br>
</br>



<table id="customers">
  
  <tr>
    <td width="5%" align="center">1.</td>
    <td id="Scramble1"></td>
    <td id="image1" width="30%">
    <div id="scramble_image1"></div>
    </td>
  </tr>
  
  <tr>
    <td align="center">2.</td>
    <td id="Scramble2"></td>
    <td><div id="scramble_image2"></div></td>
  </tr>
  
  <tr>
    <td align="center">3.</td>
    <td id="Scramble3"></td>
    <td><div id="scramble_image3"></div></td>
  </tr>
  
  <tr>
    <td align="center">4.</td>
    <td id="Scramble4"></td>
    <td><div id="scramble_image4"></div></td>
  </tr>
  
  <tr>
    <td align="center">5.</td>
    <td id="Scramble5"></td>
    <td><div id="scramble_image5"></div></td>
  </tr>
  
  
  

    
  <tr>
        <td align="left" colspan="3">Extra Scrambles:</td>
  </tr>
    
 
  
  <tr>
    <td align="center">E1.</td>
    <td id="ScrambleE1"></td>
    <td><div id="scramble_imageE1"></div></td>
  </tr>
  
  <tr>
    <td align="center">E2.</td>
    <td id="ScrambleE2"></td>
    <td><div id="scramble_imageE2"></div></td>
  </tr>

</table>



<div class="footer">
<img src="https://i.imgur.com/YHONVBb.png" alt="Chris Tran made dis" style="width:300px;height:75px;" align="right">
</div>



<script src="../tnoodle.js"></script>
<script>
  var newArr;
  var sheetCount;
  var currentSheet = 0;
  
  

  function loadFile() {
    var input, file, fr;

    if (typeof window.FileReader !== 'function') {
      alert("The file API isn't supported on this browser yet.");
      return;
    }

    input = document.getElementById('fileinput');
    if (!input) {
      alert("Um, couldn't find the fileinput element.");
    }
    else if (!input.files) {
      alert("This browser doesn't seem to support the `files` property of file inputs.");
    }
    else if (!input.files[0]) {
      alert("Please select a file before clicking 'Load'");
    }
    else {
      file = input.files[0];
      fr = new FileReader();
      fr.onload = receivedText;
      fr.readAsText(file);
    }
    

    function receivedText(e) {
      let lines = e.target.result;
      newArr = JSON.parse(lines);
      
      var sheet = newArr.sheets[0];
      sheetCount = newArr.sheets.length;
      var puzzle = sheet.scrambler;
      
      var scram1 = sheet.scrambles[0];
      var scram2 = sheet.scrambles[1];
      var scram3 = sheet.scrambles[2];
      var scram4 = sheet.scrambles[3];
      var scram5 = sheet.scrambles[4];
        
      var scramE1 = sheet.extraScrambles[0];
      var scramE2 = sheet.extraScrambles[1];
        
        
        
      document.getElementById("Scramble1").innerHTML = scram1;
      document.getElementById("Scramble2").innerHTML = scram2;
      document.getElementById("Scramble3").innerHTML = scram3;
      document.getElementById("Scramble4").innerHTML = scram4; 
      document.getElementById("Scramble5").innerHTML = scram5;
      
      document.getElementById("ScrambleE1").innerHTML = scramE1;
      document.getElementById("ScrambleE2").innerHTML = scramE2;
        
      var maxWidth = 400;
      var maxHeight = 300;
      
      var svgText1 = tnoodlejs.scrambleToSvg(scram1, puzzle, maxWidth, maxHeight);
      var scramble_image1 = document.getElementById("scramble_image1");
      scramble_image1.innerHTML = svgText1;  
      var svgText2 = tnoodlejs.scrambleToSvg(scram2, puzzle, maxWidth, maxHeight);
      var scramble_image2 = document.getElementById("scramble_image2");
      scramble_image2.innerHTML = svgText2;       
      var svgText3 = tnoodlejs.scrambleToSvg(scram3, puzzle, maxWidth, maxHeight);
      var scramble_image3 = document.getElementById("scramble_image3");
      scramble_image3.innerHTML = svgText3;
      var svgText4 = tnoodlejs.scrambleToSvg(scram4, puzzle, maxWidth, maxHeight);
      var scramble_image4 = document.getElementById("scramble_image4");
      scramble_image4.innerHTML = svgText4;
      var svgText5 = tnoodlejs.scrambleToSvg(scram5, puzzle, maxWidth, maxHeight);
      var scramble_image5 = document.getElementById("scramble_image5");
      scramble_image5.innerHTML = svgText5;
      
        
      var svgTextE1 = tnoodlejs.scrambleToSvg(scramE1, puzzle, maxWidth, maxHeight);
      var scramble_imageE1 = document.getElementById("scramble_imageE1");
      scramble_imageE1.innerHTML = svgTextE1;
        
      var svgTextE2 = tnoodlejs.scrambleToSvg(scram1, puzzle, maxWidth, maxHeight);
      var scramble_imageE2 = document.getElementById("scramble_imageE2");
      scramble_imageE2.innerHTML = svgTextE2;
      
      
      
      
      var dropdown = document.getElementById("chooseEvent");
      dropdown.options[0] = null;
      
      for ( var i =0; i < sheetCount; ++i){
      	var iSheet = newArr.sheets[i];
        var groupName = iSheet.title;
      	dropdown[dropdown.length] = new Option(groupName, i);
        	}
    	}
    
    }
    
    
    
    
    
        
    
    function loadSheet(){
        var sheetToLoad = document.getElementById("chooseEvent").value;
        currentSheet = sheetToLoad;
        var sheet = newArr.sheets[currentSheet];
        var puzzle = sheet.scrambler;
        
        var scram1 = sheet.scrambles[0];
        var scram2 = sheet.scrambles[1];
        var scram3 = sheet.scrambles[2];
        var scram4 = sheet.scrambles[3];
        var scram5 = sheet.scrambles[4];
        
        var scramE1 = sheet.extraScrambles[0];
        var scramE2 = sheet.extraScrambles[1];
        
        
        
      	document.getElementById("Scramble1").innerHTML = scram1;
        document.getElementById("Scramble2").innerHTML = scram2;
        document.getElementById("Scramble3").innerHTML = scram3;
        document.getElementById("Scramble4").innerHTML = scram4; 
        document.getElementById("Scramble5").innerHTML = scram5;
      
        document.getElementById("ScrambleE1").innerHTML = scramE1;
        document.getElementById("ScrambleE2").innerHTML = scramE2;
        
        var maxWidth = 400;
        var maxHeight = 300;
        
        
        var svgText1 = tnoodlejs.scrambleToSvg(scram1, puzzle, maxWidth, maxHeight);
        var scramble_image1 = document.getElementById("scramble_image1");
        scramble_image1.innerHTML = svgText1;
        var svgText2 = tnoodlejs.scrambleToSvg(scram2, puzzle, maxWidth, maxHeight);
        var scramble_image2 = document.getElementById("scramble_image2");
        scramble_image2.innerHTML = svgText2;       
        var svgText3 = tnoodlejs.scrambleToSvg(scram3, puzzle, maxWidth, maxHeight);
        var scramble_image3 = document.getElementById("scramble_image3");
        scramble_image3.innerHTML = svgText3;      
        var svgText4 = tnoodlejs.scrambleToSvg(scram4, puzzle, maxWidth, maxHeight);
        var scramble_image4 = document.getElementById("scramble_image4");
        scramble_image4.innerHTML = svgText4;       
        var svgText5 = tnoodlejs.scrambleToSvg(scram5, puzzle, maxWidth, maxHeight);
        var scramble_image5 = document.getElementById("scramble_image5");
        scramble_image5.innerHTML = svgText5;
        
        
        var svgTextE1 = tnoodlejs.scrambleToSvg(scramE1, puzzle, maxWidth, maxHeight);
        var scramble_imageE1 = document.getElementById("scramble_imageE1");
        scramble_imageE1.innerHTML = svgTextE1;        
        var svgTextE2 = tnoodlejs.scrambleToSvg(scram1, puzzle, maxWidth, maxHeight);
        var scramble_imageE2 = document.getElementById("scramble_imageE2");
        scramble_imageE2.innerHTML = svgTextE2;
        

    
    }
      
    
    
  
    function getImage(puzzle){
    	
  
  
  
  
  
  
  
  
  
  
</script>
</body>
</html>
